# Environment Setup Guide

To run this Next.js application with authentication and payments, you need to set up environment variables.

Create a `.env.local` file in the root directory with the following:

## NextAuth Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-random-secret-key-here

Generate a secure secret:
```bash
openssl rand -base64 32
```

**For Vercel Production:**
- Set NEXTAUTH_URL to: https://avisionforyou.vercel.app
- Add NEXTAUTH_SECRET in Vercel project settings

## Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/vision_for_you

Make sure PostgreSQL is running and the database exists.

## Google OAuth Configuration (NextAuth.js)
GOOGLE_CLIENT_ID=your-google-client-id-here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

Setup instructions:
1. Go to https://console.cloud.google.com
2. Create a new project named "AVFY Recovery"
3. Enable Google+ API
4. Create OAuth 2.0 credentials (Authorized JavaScript origins and redirect URIs)
5. Add authorized redirect URIs:
   - http://localhost:3000/api/auth/callback/google (local development)
   - https://avisionforyou.vercel.app/api/auth/callback/google (production)
6. Copy Client ID and Client Secret to your .env.local file
7. In Vercel dashboard, add these as environment variables for production

## Stripe Configuration (for donations)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_public_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

Get these from your Stripe Dashboard:
1. Go to https://dashboard.stripe.com
2. Click "Developers" → "API keys"
3. Copy your publishable and secret keys
4. Set up webhooks for: payment_intent.succeeded, checkout.session.completed, customer.subscription.updated

## Email Configuration (Resend)
RESEND_API_KEY=re_your_resend_api_key
ADMIN_EMAIL=admin@avisionforyou.org

Get Resend API key from: https://resend.com/api-keys
Free tier: 3,000 emails/month, 100 emails/day

## Cron Job Configuration (for meeting reminders)
CRON_SECRET=your-secure-random-cron-secret

Generate with:
```bash
openssl rand -base64 32
```

## Mighty Networks Configuration (Optional)
MIGHTY_NETWORKS_API_KEY=your_mighty_networks_api_key
MIGHTY_NETWORKS_COMMUNITY_ID=your_community_id

## Steps to get started:

1. **Setup Database:**
   npx prisma db push

2. **Run Development Server:**
   npm run dev

3. **Access the App:**
   Open http://localhost:3000 in your browser

4. **Test Authentication:**
   - Sign up at http://localhost:3000/signup
   - Login at http://localhost:3000/login
   - Try RSVPing for a meeting (requires login)

5. **Test Donations (requires Stripe):**
   - Set up Stripe test keys
   - Visit http://localhost:3000/donate
   - Use test card: 4242 4242 4242 4242

6. **Set up Meeting Reminders:**
   - Add CRON_SECRET to environment
   - Set up cron job (see MEETING-REMINDERS-SETUP.md)
   - Test endpoint: POST /api/cron/reminders

5. **Test Donations (with Stripe test keys):**
   - Go to http://localhost:3000/donate
   - Use test card: 4242 4242 4242 4242
   - Any future expiration date
   - Any 3-digit CVC

## Features:

✅ User Authentication (Signup/Login)
✅ Protected RSVP System (login required)
✅ Stripe Payment Processing (one-time & recurring)
✅ Professional website with real content
✅ Responsive design
✅ Admin dashboard ready (implement with role-based access)
✅ Mighty Networks integration ready
